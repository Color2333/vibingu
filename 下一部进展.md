# Vibing u v0.2 产品规划

> 从「记录工具」进化为「个人生活智能系统」

---

## 一、核心升级方向

### 1. 智能存储层 - 图床 & 媒体管理

**现状问题**：图片本地存储，不便于跨设备访问，存储成本高

**解决方案**：

```
┌─────────────────────────────────────────────────────────┐
│                    智能媒体管道                           │
├─────────────────────────────────────────────────────────┤
│  上传图片 → AI分类 → 决策引擎 → 存储路由                   │
│                         ↓                                │
│              ┌─────────┴─────────┐                       │
│              ↓                   ↓                       │
│         值得保存              仅提取数据                   │
│              ↓                   ↓                       │
│     压缩 → 云图床            OCR/识别 → 丢弃原图           │
│     (Cloudflare R2/           (节省存储)                  │
│      S3/七牛云)                                          │
└─────────────────────────────────────────────────────────┘
```

**功能特性**：
- [ ] 接入云图床（Cloudflare R2 / AWS S3 / 七牛云）
- [ ] 智能压缩策略（根据内容类型调整质量）
- [ ] 图片 CDN 加速
- [ ] 存储配额管理 & 自动清理策略
- [ ] 图片搜索（基于 AI 标签）

---

### 2. AI 能力矩阵 - 从解析到洞察

**现状问题**：AI 仅用于解析输入，缺乏深度分析能力

**升级架构**：

```
┌─────────────────────────────────────────────────────────┐
│                    AI Agent 系统                         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 解析Agent │  │ 标签Agent │  │ 洞察Agent │  │ 决策Agent │ │
│  │ (Parser)  │  │ (Tagger) │  │(Analyzer)│  │(Advisor) │ │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘ │
│       │             │             │             │        │
│       ↓             ↓             ↓             ↓        │
│   结构化数据     #标签系统      周期报告      行动建议     │
│   分类归档       关联发现      趋势预测      目标追踪     │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**Agent 职责**：

| Agent | 输入 | 输出 | 触发时机 |
|-------|------|------|----------|
| Parser | 原始输入 | 结构化数据 + 分类 | 每次记录 |
| Tagger | 结构化数据 | #标签集合 | 每次记录 |
| Analyzer | 历史数据 | 洞察报告 | 周期性/手动 |
| Advisor | 用户问题 + 历史 | 建议/决策支持 | 用户触发 |

---

### 3. 理论框架 - 科学的生活维度模型

**现状问题**：分类基于直觉，缺乏理论支撑

**设计原则**：融合多个心理学理论，同时贴合真实使用场景

---

#### 3.1 理论基础

```
┌─────────────────────────────────────────────────────────┐
│                  理论融合框架                            │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │     PERMA+ (Martin Seligman, 2011)      │            │
│  │     积极心理学幸福模型                    │            │
│  │     P-积极情绪 E-投入 R-关系 M-意义 A-成就│            │
│  └─────────────────────────────────────────┘            │
│                         +                                │
│  ┌─────────────────────────────────────────┐            │
│  │   Self-Determination Theory (Deci & Ryan)│            │
│  │   自我决定论 - 三大心理需求               │            │
│  │   Autonomy(自主) Competence(胜任) Relatedness(关联)   │
│  └─────────────────────────────────────────┘            │
│                         +                                │
│  ┌─────────────────────────────────────────┐            │
│  │      Wheel of Life (生活轮模型)          │            │
│  │      健康、事业、财务、关系、成长、休闲... │            │
│  └─────────────────────────────────────────┘            │
│                         +                                │
│  ┌─────────────────────────────────────────┐            │
│  │    Digital Wellness (数字健康理论)       │            │
│  │    屏幕时间、注意力管理、数字排毒         │            │
│  └─────────────────────────────────────────┘            │
│                         ↓                                │
│  ┌─────────────────────────────────────────┐            │
│  │        Vibing Index 2.0 模型            │            │
│  │        8维度 × 多子项 生活评估体系        │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

#### 3.2 八维度生活模型

```
┌─────────────────────────────────────────────────────────┐
│              Vibing Index 2.0 - 八维度模型               │
├─────────────────────────────────────────────────────────┤
│                                                          │
│                      ┌─────┐                            │
│                      │ 身体 │                            │
│                      │Body │                            │
│                      └──┬──┘                            │
│              ┌─────┐   │   ┌─────┐                     │
│              │ 成长 │───┼───│ 情绪 │                     │
│              │Growth│   │   │Mood │                     │
│              └──┬──┘   │   └──┬──┘                     │
│     ┌─────┐    │      │      │    ┌─────┐              │
│     │ 休闲 │────┼──────┼──────┼────│ 关系 │              │
│     │Leisure   │      │      │    │Social│              │
│     └──┬──┘    │      │      │    └──┬──┘              │
│              └─────┐   │   ┌─────┘                     │
│              │ 数字 │───┼───│ 效能 │                     │
│              │Digital  │   │ Work │                     │
│              └─────┘   │   └─────┘                     │
│                      ┌──┴──┐                            │
│                      │ 意义 │                            │
│                      │Meaning                           │
│                      └─────┘                            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

#### 3.3 维度详解 & 数据映射

| 维度 | 理论来源 | 你的输入场景 | 子维度 | AI 提取指标 |
|------|----------|--------------|--------|-------------|
| **🛏️ 身体 Body** | PERMA-V | 睡觉时间、饮食照片、运动记录 | 睡眠、饮食、运动、能量 | 睡眠时长/质量、餐食健康度、运动频率 |
| **😊 情绪 Mood** | PERMA-P | 日记、事件记录中的情绪词 | 快乐、平静、焦虑、压力 | 情绪词频分析、正负比例、情绪波动 |
| **👥 关系 Social** | PERMA-R + SDT | "和朋友吃饭"、社交活动记录 | 家人、朋友、同事、独处 | 社交频率、关系多样性、独处时长 |
| **💼 效能 Work** | PERMA-E + 心流 | 工作产出、项目进展 | 专注、产出、效率、心流 | 工作时长、完成事项、专注时段 |
| **📚 成长 Growth** | SDT-胜任 | 读书感想、学习记录、新技能 | 阅读、学习、技能、反思 | 阅读量、学习时长、感想深度 |
| **🎯 意义 Meaning** | PERMA-M | 反思日记、目标记录 | 目标、价值、贡献、愿景 | 目标完成率、反思频率、价值认同 |
| **📱 数字 Digital** | 数字健康 | 屏幕使用时间截图 | 总时长、App分布、拿起次数 | 日均时长、社交媒体占比、专注时段 |
| **🎮 休闲 Leisure** | 生活轮 | 娱乐、爱好、放松活动 | 娱乐、爱好、旅行、放松 | 休闲时长、活动多样性、恢复质量 |

---

#### 3.4 你的典型使用场景映射

```
┌─────────────────────────────────────────────────────────┐
│                  日常使用场景 → 维度映射                  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  📝 "今天发生了xxx事情"                                  │
│     → AI 分析情绪词 → 😊 情绪                            │
│     → AI 识别事件类型 → 👥 关系 / 💼 效能 / 🎮 休闲      │
│     → AI 提取人物 → 👥 关系 (标签: #人物/小明)          │
│                                                          │
│  📸 拍照上传吃的东西                                     │
│     → AI 识别食物 → 🛏️ 身体.饮食                        │
│     → 估算热量/健康度 → 饮食质量评分                     │
│     → 标签: #饮食/午餐 #地点/公司食堂                   │
│                                                          │
│  🌙 "昨晚11点睡，早上7点起"                              │
│     → AI 提取时间 → 🛏️ 身体.睡眠                        │
│     → 计算时长 8h → 睡眠评分                             │
│     → 关联: 昨日屏幕时间、运动情况                       │
│                                                          │
│  📱 屏幕使用时间截图                                     │
│     → OCR 提取数据 → 📱 数字                             │
│     → App 分类: 社交/效率/娱乐                           │
│     → 生成洞察: "抖音占比过高，建议..."                  │
│                                                          │
│  📖 "读了《原子习惯》，感想是..."                        │
│     → AI 提取书名 → 📚 成长.阅读                         │
│     → 分析感想深度 → 反思质量评分                        │
│     → 标签: #书籍/原子习惯 #主题/习惯养成               │
│     → 向量化存入 RAG → 未来可问"我读过哪些习惯类的书"   │
│                                                          │
│  🏃 "今天跑步5公里"                                      │
│     → AI 识别运动 → 🛏️ 身体.运动                        │
│     → 提取: 类型=跑步, 距离=5km                          │
│     → 关联分析: 运动后情绪/睡眠变化                      │
│                                                          │
│  😔 "今天心情不太好，因为..."                            │
│     → AI 情绪分析 → 😊 情绪 (负面)                       │
│     → 归因分析 → 关联近期模式                            │
│     → 生成建议: "注意到你最近睡眠不足，可能相关..."      │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

#### 3.5 维度权重 & 个性化

不同人对各维度的重视程度不同，支持个性化权重：

```
┌─────────────────────────────────────────────────────────┐
│                  个性化权重设置                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  默认权重 (均等):                                        │
│  身体 12.5% | 情绪 12.5% | 关系 12.5% | 效能 12.5%      │
│  成长 12.5% | 意义 12.5% | 数字 12.5% | 休闲 12.5%      │
│                                                          │
│  你的个性化权重 (示例):                                  │
│  ┌─────────────────────────────────────────┐            │
│  │ 🛏️ 身体    ████████████████░░░░  20%   │            │
│  │ 😊 情绪    ████████████░░░░░░░░  15%   │            │
│  │ 👥 关系    ████████░░░░░░░░░░░░  10%   │            │
│  │ 💼 效能    ████████████░░░░░░░░  15%   │            │
│  │ 📚 成长    ████████████████░░░░  20%   │ ← 重视学习 │
│  │ 🎯 意义    ████████░░░░░░░░░░░░  10%   │            │
│  │ 📱 数字    ████████░░░░░░░░░░░░  5%    │            │
│  │ 🎮 休闲    ████████░░░░░░░░░░░░  5%    │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  Vibing Score = Σ (维度得分 × 权重)                     │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

#### 3.6 子维度详细定义

**🛏️ 身体 Body (Vitality)**
| 子维度 | 数据来源 | 评分标准 | 理论依据 |
|--------|----------|----------|----------|
| 睡眠 | 睡眠时间记录 | 7-9h=100, <6h=40 | 睡眠科学 |
| 饮食 | 餐食照片 | AI评估健康度 | 营养学 |
| 运动 | 运动记录 | 频率+强度 | 运动医学 |
| 能量 | 主观记录 | 疲劳/精力词频 | 自我感知 |

**📚 成长 Growth (Competence)**
| 子维度 | 数据来源 | 评分标准 | 理论依据 |
|--------|----------|----------|----------|
| 阅读 | 读书记录 | 数量+感想深度 | 终身学习 |
| 学习 | 学习记录 | 时长+新知识 | SDT-胜任感 |
| 技能 | 练习记录 | 刻意练习频率 | 刻意练习理论 |
| 反思 | 日记/感想 | 深度+频率 | 元认知 |

**😊 情绪 Mood (Positive Emotion)**
| 子维度 | 数据来源 | 评分标准 | 理论依据 |
|--------|----------|----------|----------|
| 快乐 | 文本情绪分析 | 积极词频 | 情绪心理学 |
| 平静 | 文本情绪分析 | 平和词频 | 正念理论 |
| 压力 | 文本情绪分析 | 压力词频(负向) | 压力理论 |
| 焦虑 | 文本情绪分析 | 焦虑词频(负向) | 焦虑理论 |

**📱 数字 Digital (Digital Wellness)**
| 子维度 | 数据来源 | 评分标准 | 理论依据 |
|--------|----------|----------|----------|
| 总时长 | 屏幕时间截图 | <4h=100, >8h=30 | 数字极简 |
| 社交媒体 | App分类 | 占比<20%=好 | 注意力经济 |
| 拿起次数 | 截图OCR | <50次=好 | 习惯研究 |
| 专注时段 | 时间分布 | 连续使用<30min | 心流理论 |

---

### 4. 个人知识库 - RAG 系统

**现状问题**：历史数据只能浏览，无法智能查询

**系统设计**：

```
┌─────────────────────────────────────────────────────────┐
│                Personal Life RAG System                  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   用户提问                                                │
│      │                                                   │
│      ↓                                                   │
│   ┌─────────────────────────────────────────┐           │
│   │            Query Processor              │           │
│   │    (理解意图、时间范围、主题)             │           │
│   └────────────────┬────────────────────────┘           │
│                    │                                     │
│                    ↓                                     │
│   ┌─────────────────────────────────────────┐           │
│   │         Vector Database (Qdrant)        │           │
│   │  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐       │           │
│   │  │日记 │ │情绪 │ │活动 │ │反思 │ ...   │           │
│   │  │向量 │ │向量 │ │向量 │ │向量 │       │           │
│   │  └─────┘ └─────┘ └─────┘ └─────┘       │           │
│   └────────────────┬────────────────────────┘           │
│                    │ Top-K 相关记录                      │
│                    ↓                                     │
│   ┌─────────────────────────────────────────┐           │
│   │         LLM Context Builder             │           │
│   │    (构建包含历史的 Prompt)               │           │
│   └────────────────┬────────────────────────┘           │
│                    │                                     │
│                    ↓                                     │
│   ┌─────────────────────────────────────────┐           │
│   │              GPT-4o                     │           │
│   │    生成基于个人历史的回答                 │           │
│   └─────────────────────────────────────────┘           │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**应用场景**：

| 场景 | 示例问题 | RAG 价值 |
|------|----------|----------|
| 回顾分析 | "上个月我的状态怎么样？" | 自动汇总历史数据 |
| 模式发现 | "我什么时候效率最高？" | 关联分析时间+状态 |
| 决策支持 | "我应该这周末做什么？" | 基于历史偏好推荐 |
| 健康追踪 | "我的睡眠问题是什么时候开始的？" | 时序追溯 |
| 自我认知 | "我是一个什么样的人？" | 个性画像生成 |

---

### 5. 智能标签系统

**设计原则**：

```
┌─────────────────────────────────────────────────────────┐
│                    标签体系架构                           │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   系统标签 (自动)           用户标签 (手动)               │
│   ├── #维度/睡眠            ├── #项目/vibingu             │
│   ├── #维度/饮食            ├── #人物/小明                │
│   ├── #情绪/开心            ├── #地点/咖啡馆              │
│   ├── #时间/早晨            └── #自定义...                │
│   ├── #活动/运动                                         │
│   └── #主题/工作                                         │
│                                                          │
│   AI 推荐标签                                             │
│   └── 基于内容语义自动建议，用户确认后添加                  │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**标签功能**：
- [ ] 自动标签生成（AI 基于内容推断）
- [ ] 标签层级管理（维度/主题/自定义）
- [ ] 标签云可视化
- [ ] 基于标签的智能筛选
- [ ] 标签关联分析（哪些标签经常同时出现）

---

### 6. Token 用量管理

**成本控制策略**：

```
┌─────────────────────────────────────────────────────────┐
│                  Token 管理系统                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   ┌─────────────────────────────────────────┐           │
│   │              用量监控面板                │           │
│   │  ┌─────────────────────────────────┐   │           │
│   │  │ 今日: 1,234 tokens  │ $0.02     │   │           │
│   │  │ 本周: 8,500 tokens  │ $0.13     │   │           │
│   │  │ 本月: 35,000 tokens │ $0.53     │   │           │
│   │  └─────────────────────────────────┘   │           │
│   └─────────────────────────────────────────┘           │
│                                                          │
│   成本优化策略:                                           │
│   ├── 1. 模型分级: 简单任务用 GPT-3.5, 复杂用 GPT-4       │
│   ├── 2. 缓存机制: 相似输入复用之前的结果                  │
│   ├── 3. 批处理: 合并多个小请求                           │
│   ├── 4. Prompt 优化: 精简系统提示词                      │
│   └── 5. 本地模型: 简单分类任务用本地小模型                │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**实现要点**：
- [ ] 每次 API 调用记录 token 数
- [ ] 按日/周/月统计用量
- [ ] 设置用量预警阈值
- [ ] 成本预估 Dashboard
- [ ] 支持设置每日/每月上限

---

### 7. 时间智能分析 ⭐⭐⭐

**核心价值**：发现个人生物钟规律，这是产品的核心差异化能力

```
┌─────────────────────────────────────────────────────────┐
│                  时间智能分析系统                         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │            昼夜节律分析                  │            │
│  ├─────────────────────────────────────────┤            │
│  │  🌅 黄金时间: 9:00-11:00 (专注力峰值)    │            │
│  │  😴 低谷时段: 14:00-15:00 (建议轻任务)   │            │
│  │  🌙 创意时间: 21:00+ (灵感高峰)          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │            周期模式识别                  │            │
│  ├─────────────────────────────────────────┤            │
│  │  📅 周规律:                              │            │
│  │     - 周一效率较低 (假期后遗症)          │            │
│  │     - 周三是你的效率高峰日               │            │
│  │     - 周五下午专注力下降 30%             │            │
│  │                                          │            │
│  │  📆 月规律:                              │            │
│  │     - 每月 15 号前后情绪波动较大         │            │
│  │     - 月初目标感最强                     │            │
│  │                                          │            │
│  │  🍂 季节规律:                            │            │
│  │     - 冬季运动频率下降 40%               │            │
│  │     - 夏季睡眠质量较差                   │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │            事件影响追溯                  │            │
│  ├─────────────────────────────────────────┤            │
│  │  "上次状态这么好是什么时候？"            │            │
│  │  → 3周前，连续5天早睡 + 每天晨跑         │            │
│  │                                          │            │
│  │  "最近状态下滑的原因？"                  │            │
│  │  → 检测到：连续熬夜 + 屏幕时间激增       │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**功能清单**：
- [ ] 每日时段效率分析（基于记录时间+内容质量）
- [ ] 个人生物钟画像生成
- [ ] 周/月/季节周期模式自动识别
- [ ] "最佳状态"条件归因分析
- [ ] 基于时间规律的智能提醒

---

### 8. 高级可视化 ⭐⭐

**设计目标**：让数据"可感知"，提升用户对自身状态的直观理解

```
┌─────────────────────────────────────────────────────────┐
│                  可视化组件库                            │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  1. 生活热力图 (GitHub Contribution 风格)                │
│  ┌─────────────────────────────────────────┐            │
│  │     一  二  三  四  五  六  日           │            │
│  │ W1  ■  ■  □  ■  ■  ■  □               │            │
│  │ W2  ■  ■  ■  ■  □  ■  ■               │            │
│  │ W3  ■  □  ■  ■  ■  ■  ■               │            │
│  │ W4  □  ■  ■  ■  ■  □  ■               │            │
│  │                                          │            │
│  │ □ 低  ▪ 中  ■ 高  (Vibe Score)          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  2. 多维雷达图 (个人状态画像)                            │
│  ┌─────────────────────────────────────────┐            │
│  │              睡眠 85                     │            │
│  │               ╱╲                        │            │
│  │        社交 60    饮食 70               │            │
│  │            ╲    ╱                       │            │
│  │        运动 75──屏幕 45                 │            │
│  │                                          │            │
│  │     本周 ── vs ── 上周 (对比)            │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  3. 24小时环形图 (一天的时间分布)                        │
│  ┌─────────────────────────────────────────┐            │
│  │           00:00                          │            │
│  │        ████████                         │            │
│  │      ██  睡眠  ██                       │            │
│  │    18 █        █ 06                     │            │
│  │      ██  工作  ██                       │            │
│  │        ████████                         │            │
│  │           12:00                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  4. 情绪河流图 (时间序列情绪变化)                        │
│  ┌─────────────────────────────────────────┐            │
│  │  😊 ──╲    ╱──────╲      ╱────         │            │
│  │  😐 ───╲──╱────────╲────╱─────         │            │
│  │  😢 ────────────────────────────        │            │
│  │      1月    2月    3月    4月            │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  5. 标签关系网络图                                       │
│  ┌─────────────────────────────────────────┐            │
│  │       [咖啡] ─── [工作]                  │            │
│  │          ╲       ╱                       │            │
│  │           [专注]                         │            │
│  │          ╱       ╲                       │            │
│  │     [早起] ─── [运动]                    │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**功能清单**：
- [ ] 年度热力图（记录频率 + Vibe 等级）
- [ ] 多维雷达图（可配置维度）
- [ ] 时间分布环形图
- [ ] 情绪趋势河流图
- [ ] 标签/主题关系网络
- [ ] 对比视图（本周 vs 上周，本月 vs 上月）

---

### 9. 预测 & 异常检测 ⭐⭐

**AI 价值体现**：从"被动记录"到"主动预警"

```
┌─────────────────────────────────────────────────────────┐
│                  智能预测系统                            │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │            状态预测引擎                  │            │
│  ├─────────────────────────────────────────┤            │
│  │                                          │            │
│  │  基于过去 90 天数据，预测明日状态:        │            │
│  │                                          │            │
│  │  📊 预测 Vibe: 68-73 (置信度 85%)        │            │
│  │                                          │            │
│  │  💡 优化建议:                            │            │
│  │  "如果今晚 23:00 前睡觉，                │            │
│  │   明天 Vibe 预计提升至 75-80"            │            │
│  │                                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │            异常检测告警                  │            │
│  ├─────────────────────────────────────────┤            │
│  │                                          │            │
│  │  ⚠️ 检测到以下异常模式:                  │            │
│  │                                          │            │
│  │  🔴 睡眠警告                             │            │
│  │     连续 4 天睡眠不足 6 小时              │            │
│  │     (历史平均: 7.2 小时)                 │            │
│  │                                          │            │
│  │  🟡 屏幕时间警告                         │            │
│  │     本周屏幕时间比平均多 45%              │            │
│  │     主要增长: 社交媒体 +2.5h/天          │            │
│  │                                          │            │
│  │  🟡 运动缺失                             │            │
│  │     已连续 7 天无运动记录                 │            │
│  │     (你的平均运动间隔: 2.3 天)           │            │
│  │                                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │            因果归因分析                  │            │
│  ├─────────────────────────────────────────┤            │
│  │                                          │            │
│  │  📈 高效日的共同特征:                    │            │
│  │     - 前一晚睡眠 ≥ 7h (出现率 89%)       │            │
│  │     - 有吃早餐 (出现率 76%)              │            │
│  │     - 上午有运动 (出现率 65%)            │            │
│  │                                          │            │
│  │  📉 低落日的共同特征:                    │            │
│  │     - 连续 3+ 天无运动 (出现率 72%)      │            │
│  │     - 前一天屏幕时间 > 8h (出现率 68%)   │            │
│  │     - 社交活动缺失 > 5天 (出现率 61%)    │            │
│  │                                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**功能清单**：
- [ ] 次日 Vibe 预测（基于历史模式）
- [ ] 异常模式实时检测
- [ ] 多维度告警阈值配置
- [ ] 因果归因分析报告
- [ ] "如果...那么..."模拟预测
- [ ] 周期性健康风险提醒

---

### 10. 游戏化系统 ⭐

**目标**：提升记录动力，增加用户粘性

```
┌─────────────────────────────────────────────────────────┐
│                  游戏化激励系统                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │              等级系统                    │            │
│  ├─────────────────────────────────────────┤            │
│  │                                          │            │
│  │  当前等级: Lv.5 生活观察者               │            │
│  │  ████████████░░░░░░░░ 1,250/2,000 XP    │            │
│  │                                          │            │
│  │  等级路径:                               │            │
│  │  Lv.1  新手记录者     (0 XP)            │            │
│  │  Lv.3  习惯养成者     (500 XP)          │            │
│  │  Lv.5  生活观察者     (1,000 XP) ← 当前 │            │
│  │  Lv.7  数据分析师     (2,500 XP)        │            │
│  │  Lv.10 生活大师       (5,000 XP)        │            │
│  │                                          │            │
│  │  经验获取:                               │            │
│  │  · 每日记录 +10 XP                       │            │
│  │  · 连续记录 +5 XP/天 (累加)             │            │
│  │  · 完成目标 +50 XP                       │            │
│  │  · 达成成就 +100 XP                      │            │
│  │                                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │              成就徽章                    │            │
│  ├─────────────────────────────────────────┤            │
│  │                                          │            │
│  │  已解锁 (12/30):                         │            │
│  │                                          │            │
│  │  🌅 早起鸟        连续 7 天 7 点前记录    │            │
│  │  🏃 运动达人      单月运动 20 次          │            │
│  │  📖 深度思考者    累计 50 条反思记录      │            │
│  │  🎯 目标猎手      完成 10 个设定目标      │            │
│  │  🔥 燃烧吧        连续记录 30 天          │            │
│  │  💯 完美一天      单日 Vibe 达到 95+      │            │
│  │  🌙 夜猫子克星    连续 14 天 23 点前睡    │            │
│  │  🥗 健康饮食家    连续 7 天记录三餐       │            │
│  │                                          │            │
│  │  待解锁:                                 │            │
│  │  🔮 数据先知      使用 RAG 问答 100 次    │            │
│  │  📊 年度总结      完成一年的记录          │            │
│  │  🏆 传奇玩家      解锁所有成就            │            │
│  │                                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
│  ┌─────────────────────────────────────────┐            │
│  │              挑战任务                    │            │
│  ├─────────────────────────────────────────┤            │
│  │                                          │            │
│  │  📅 本周挑战:                            │            │
│  │  · 连续 5 天 Vibe > 70      [3/5] 🔥    │            │
│  │  · 记录 3 次运动            [1/3]       │            │
│  │  · 屏幕时间控制在 6h 内     [2/7]       │            │
│  │                                          │            │
│  │  🎁 完成奖励: +200 XP + 专属徽章        │            │
│  │                                          │            │
│  │  📆 月度挑战:                            │            │
│  │  · 每天至少记录 1 条         [18/30]    │            │
│  │  · 月均 Vibe ≥ 65           [当前: 68]  │            │
│  │                                          │            │
│  └─────────────────────────────────────────┘            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**功能清单**：
- [ ] 经验值 & 等级系统
- [ ] 成就徽章体系（30+ 个成就）
- [ ] 每周/每月挑战任务
- [ ] 连续记录 Streak 奖励
- [ ] 成就分享卡片
- [ ] 个人排行榜（与历史自己对比）

---

## 二、技术架构升级

### 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                    Vibing u v0.2 架构                    │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   ┌─────────────────────────────────────────┐           │
│   │              Frontend (Next.js)         │           │
│   │    PWA / 响应式 / 离线支持              │           │
│   └────────────────┬────────────────────────┘           │
│                    │                                     │
│   ┌────────────────┴────────────────────────┐           │
│   │              API Gateway                │           │
│   │         (FastAPI + Auth)                │           │
│   └────────────────┬────────────────────────┘           │
│                    │                                     │
│   ┌────────┬───────┴───────┬────────┬───────┐          │
│   ↓        ↓               ↓        ↓       ↓          │
│ ┌────┐  ┌─────┐      ┌─────────┐ ┌─────┐ ┌─────┐      │
│ │Feed│  │Report│     │AI Agent │ │Media│ │ RAG │      │
│ │ Svc│  │ Svc │      │  System │ │ Svc │ │ Svc │      │
│ └──┬─┘  └──┬──┘      └────┬────┘ └──┬──┘ └──┬──┘      │
│    │       │              │         │       │          │
│    └───────┴──────┬───────┴─────────┴───────┘          │
│                   │                                     │
│   ┌───────────────┴─────────────────────────┐          │
│   │              Data Layer                 │          │
│   │  ┌──────┐  ┌────────┐  ┌─────────┐     │          │
│   │  │SQLite│  │ Qdrant │  │Cloud CDN│     │          │
│   │  │/PgSQL│  │(Vector)│  │ (Images)│     │          │
│   │  └──────┘  └────────┘  └─────────┘     │          │
│   └─────────────────────────────────────────┘          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 新增技术栈

| 组件 | 技术选型 | 用途 |
|------|----------|------|
| 向量数据库 | Qdrant / Pinecone | RAG 检索 |
| 图床 | Cloudflare R2 | 图片存储 |
| 缓存 | Redis | API 缓存、会话 |
| 任务队列 | Celery / RQ | 异步 AI 任务 |
| 嵌入模型 | text-embedding-3-small | 向量化 |

---

## 三、开发优先级

### Phase 1: 基础强化 (2周)
- [ ] Token 用量统计系统
- [ ] 智能标签系统 (Tagger Agent)
- [ ] 错误处理 & 日志完善
- [ ] 单元测试覆盖

### Phase 2: 时间智能 & 可视化 (3周) ⭐ 核心差异化
- [ ] 时间智能分析引擎
  - [ ] 昼夜节律分析
  - [ ] 周/月/季节周期识别
  - [ ] 个人生物钟画像
- [ ] 高级可视化组件
  - [ ] 年度热力图
  - [ ] 多维雷达图
  - [ ] 时间分布环形图
  - [ ] 情绪趋势河流图

### Phase 3: AI 增强 (3周)
- [ ] RAG 系统搭建 (Qdrant + 嵌入)
- [ ] 对话式查询界面
- [ ] 预测 & 异常检测系统
  - [ ] 次日 Vibe 预测
  - [ ] 异常模式检测
  - [ ] 因果归因分析
- [ ] 理论模型重构 (PERMA-V)

### Phase 4: 存储升级 (2周)
- [ ] 云图床接入
- [ ] 图片 CDN
- [ ] 存储配额管理

### Phase 5: 游戏化 & 留存 (2周)
- [ ] 等级 & 经验值系统
- [ ] 成就徽章体系
- [ ] 每周/月挑战任务
- [ ] 分享卡片优化

### Phase 6: 生产化 (2周)
- [ ] Docker 部署
- [ ] CI/CD 流水线
- [ ] 监控告警
- [ ] 数据备份

---

## 四、核心价值主张

```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│     从「记录」到「理解」到「优化」                         │
│                                                          │
│     ┌─────────┐    ┌─────────┐    ┌─────────┐          │
│     │  记录   │ →  │  理解   │ →  │  优化   │          │
│     │ Record  │    │Understand│   │ Optimize │          │
│     └─────────┘    └─────────┘    └─────────┘          │
│                                                          │
│     多模态输入      AI 分析洞察     个性化建议            │
│     智能标签        RAG 问答        目标追踪              │
│     自动分类        模式发现        行动指导              │
│                                                          │
│     "你的生活，值得被深度理解"                            │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

*Last updated: 2026-02-04*
